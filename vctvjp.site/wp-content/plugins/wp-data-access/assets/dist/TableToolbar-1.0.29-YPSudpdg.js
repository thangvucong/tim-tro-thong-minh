const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableChart-1.0.29-DYrO55LT.js","./cm-1.0.29-B-jRz_ox.js","./redux-1.0.29-C1Q38y1F.js","./vendor-1.0.29-BmpNFhoq.js","./index-1.0.29-DewteZsJ.js","./index-1.0.29-CZwhy2eo.js","./DialogContent-1.0.29-DSOFFK1-.js","./Typography-1.0.29-DKDDWYKJ.js","./lib-1.0.29-C3pCU2AT.js","./loglevel-1.0.29-BZ7XahX3.js","./lodash-1.0.29-CLFJOMhY.js","./moment-1.0.29-C5S46NFB.js","./index-1.0.29-Dlm2kjka.js","./iconBase-1.0.29-DWX4ew0u.js","./notistack-1.0.29-DTteiN_s.js","./Menu-1.0.29-DOOr2lTO.js","./ThemeProvider-1.0.29-6fkyOh-r.js","./RestApi-1.0.29-D1Nj1ewF.js","./ChartTypeSelection-1.0.29-D8_WZb80.js","./ChartTypes-1.0.29-CHJhCh--.js","./index-1.0.29-BOWxC8Fi.js","./FormHelperText-1.0.29-DrHduTUH.js","./useFormControl-1.0.29-DBjraibe.js","./TextField-1.0.29-DGwcptkL.js","./FormLabel-1.0.29-V40o0R6-.js","./useControlled-1.0.29-gPCMf8hr.js","./createSvgIcon-1.0.29-DRHeS-Ok.js","./MenuItem-1.0.29-hQUyAg_Q.js","./ListItemIcon-1.0.29-Ch2iR42N.js","./Chart-1.0.29-C3cfFZaj.js","./main-1.0.29.js","./useTheme-1.0.29-BG2eLrmM.js","./index-1.0.29-D3hJYFO0.js","./Spinner-1.0.29-BS14fgdJ.js","./Tooltip-1.0.29-D8cmS8RQ.js","./Popper-1.0.29-DA77uIz-.js","./useTableColumnOrder-1.0.29-BTwTNZ3x.js","./CardContent-1.0.29-D9omFsvB.js","./Autocomplete-1.0.29-BeVKfuIu.js","./Close-1.0.29-DMVND8Dd.js","./TableToolbarInlineEditingButton-1.0.29-By5uRHXI.js","./TableQuery-1.0.29-BVKVP9OU.js","./useStoreTable-1.0.29-0wdtptv-.js","./index-1.0.29--cvqXtNy.js","./ActionsDml-1.0.29-CLWi12Fx.js","./ConfirmDialog-1.0.29-CS4WrjWL.js","./AdminTheme-1.0.29-j2gnN0Eb.js","./ConfirmDialog-1.0.29--D4jr2go.css","./SanitizeComponent-1.0.29-C3Py-1w8.js","./dompurify-1.0.29-CCJo14B2.js","./tanstack-1.0.29-h9aUsVM0.js","./index.esm-1.0.29-CvwOQwKB.js","./Collapse-1.0.29-BdBN3O_f.js","./FormControlLabel-1.0.29-BWMy6Yxq.js","./Checkbox-1.0.29-DTq3kp48.js","./SwitchBase-1.0.29-aa8fP0Df.js","./InputAdornment-1.0.29-CO4NNpRp.js","./TimePicker-1.0.29-lLnNnKJ8.js","./useMobilePicker-1.0.29-Df2Tk0E7.js","./visuallyHidden-1.0.29-Dan1xhjv.js","./ListItem-1.0.29-D5iRmc9g.js","./timeViewRenderers-1.0.29-8ZO1XmkN.js","./DateTimePicker-1.0.29-BuM9THmE.js","./Tabs-1.0.29-B0UPz-Vu.js","./dateViewRenderers-1.0.29-DIZT5Wx_.js","./Divider-1.0.29-DUrOUuwN.js","./DatePicker-1.0.29-Beqi-UmW.js","./Stack-1.0.29-Be5OvNOr.js","./Slider-1.0.29-Bfsw0S30.js","./Radio-1.0.29-DtS8PS_A.js","./AlertTitle-1.0.29-DGwwjnOl.js","./Switch-1.0.29-CFPuiCpy.js","./index.esm-1.0.29-BcBy0Voo.js","./TableContainer-1.0.29-yJ4HmhJu.js","./FallbackSpinner-1.0.29-Bxoz_pLD.js","./ActionsSettings-1.0.29-CQwexJxa.js","./TargetEnum-1.0.29-DPFnTxiX.js","./ScopeEnum-1.0.29-B4DDvIDj.js","./index-1.0.29-DNyiXtkx.js","./TabPanel-1.0.29-CHhWjnrS.js","./useTableUpdater-1.0.29-CrKOH01n.js","./settings-1.0.29-CBCx_N9a.js","./settings-1.0.29-Bx2jvYL6.css","./useScreenSize-1.0.29-C2BqwJQv.js","./ThemeContainer-1.0.29-CLFqgikx.js","./TableQuery-1.0.29-AnzhVzs2.css"])))=>i.map(i=>d[i]);
import{_ as he}from"./main-1.0.29.js";import{j as l}from"./cm-1.0.29-B-jRz_ox.js";import{r as m}from"./redux-1.0.29-C1Q38y1F.js";import{l as p,v as Ie,ab as Pe,V as Me,aM as qe,bS as Ve,bs as He,bK as Je}from"./lib-1.0.29-C3pCU2AT.js";import{M as Ue,m as Ke,I as ze,E as Ge}from"./index-1.0.29-Dlm2kjka.js";import{P as Xe,b as ce,a as Qe}from"./index-1.0.29-DewteZsJ.js";import{m as de,o as Ye,p as Ze}from"./index-1.0.29-DNyiXtkx.js";import{r as Le}from"./jstoxml-1.0.29-Dl-iHI-R.js";import{F as $}from"./FileSaver.min-1.0.29-DY4JwtQ4.js";import"./dompurify-1.0.29-CCJo14B2.js";import{u as $e,a as We,b as De}from"./TableQuery-1.0.29-BVKVP9OU.js";import{d as er}from"./ActionsDml-1.0.29-CLWi12Fx.js";import{C as rr}from"./ConfirmDialog-1.0.29-CS4WrjWL.js";import{e as K}from"./notistack-1.0.29-DTteiN_s.js";import{a as or}from"./RestApi-1.0.29-D1Nj1ewF.js";import{d as tr,h as sr}from"./useTheme-1.0.29-BG2eLrmM.js";import{u as ue}from"./index-1.0.29-D3hJYFO0.js";import{a as nr,P as lr}from"./Menu-1.0.29-DOOr2lTO.js";import{B as C}from"./Spinner-1.0.29-BS14fgdJ.js";import{I as H}from"./iconBase-1.0.29-DWX4ew0u.js";import{F as be}from"./FormHelperText-1.0.29-DrHduTUH.js";import{A as ir,C as cr}from"./Autocomplete-1.0.29-BeVKfuIu.js";import{T as dr}from"./TextField-1.0.29-DGwcptkL.js";import{T as X}from"./Tooltip-1.0.29-D8cmS8RQ.js";import{B as z}from"./CardContent-1.0.29-D9omFsvB.js";import{F as pe}from"./FormLabel-1.0.29-V40o0R6-.js";import{F as O}from"./FormControlLabel-1.0.29-BWMy6Yxq.js";import{C as ur}from"./Checkbox-1.0.29-DTq3kp48.js";import{R as pr}from"./RadioGroup-1.0.29-DlKNzHJO.js";import{R as I}from"./Radio-1.0.29-DtS8PS_A.js";import{R as me}from"./ThemeContainer-1.0.29-CLFqgikx.js";import"./moment-1.0.29-C5S46NFB.js";import{F as ae}from"./FallbackSpinner-1.0.29-Bxoz_pLD.js";import"./vendor-1.0.29-BmpNFhoq.js";import"./loglevel-1.0.29-BZ7XahX3.js";import"./lodash-1.0.29-CLFJOMhY.js";import"./Typography-1.0.29-DKDDWYKJ.js";import"./index-1.0.29-CZwhy2eo.js";import"./DialogContent-1.0.29-DSOFFK1-.js";import"./useStoreTable-1.0.29-0wdtptv-.js";import"./index-1.0.29--cvqXtNy.js";import"./SanitizeComponent-1.0.29-C3Py-1w8.js";import"./index-1.0.29-BOWxC8Fi.js";import"./tanstack-1.0.29-h9aUsVM0.js";import"./index.esm-1.0.29-CvwOQwKB.js";import"./createSvgIcon-1.0.29-DRHeS-Ok.js";import"./Collapse-1.0.29-BdBN3O_f.js";import"./InputAdornment-1.0.29-CO4NNpRp.js";import"./useFormControl-1.0.29-DBjraibe.js";import"./TimePicker-1.0.29-lLnNnKJ8.js";import"./useMobilePicker-1.0.29-Df2Tk0E7.js";import"./Popper-1.0.29-DA77uIz-.js";import"./ThemeProvider-1.0.29-6fkyOh-r.js";import"./useControlled-1.0.29-gPCMf8hr.js";import"./visuallyHidden-1.0.29-Dan1xhjv.js";import"./ListItem-1.0.29-D5iRmc9g.js";import"./timeViewRenderers-1.0.29-8ZO1XmkN.js";import"./MenuItem-1.0.29-hQUyAg_Q.js";import"./DateTimePicker-1.0.29-BuM9THmE.js";import"./Tabs-1.0.29-B0UPz-Vu.js";import"./dateViewRenderers-1.0.29-DIZT5Wx_.js";import"./Divider-1.0.29-DUrOUuwN.js";import"./DatePicker-1.0.29-Beqi-UmW.js";import"./Stack-1.0.29-Be5OvNOr.js";import"./Slider-1.0.29-Bfsw0S30.js";import"./ListItemIcon-1.0.29-Ch2iR42N.js";import"./AlertTitle-1.0.29-DGwwjnOl.js";import"./Close-1.0.29-DMVND8Dd.js";import"./Switch-1.0.29-CFPuiCpy.js";import"./SwitchBase-1.0.29-aa8fP0Df.js";import"./index.esm-1.0.29-BcBy0Voo.js";import"./TableContainer-1.0.29-yJ4HmhJu.js";import"./AdminTheme-1.0.29-j2gnN0Eb.js";import"./ActionsSettings-1.0.29-CQwexJxa.js";import"./TargetEnum-1.0.29-DPFnTxiX.js";import"./ScopeEnum-1.0.29-B4DDvIDj.js";import"./TabPanel-1.0.29-CHhWjnrS.js";import"./useTableUpdater-1.0.29-CrKOH01n.js";import"./settings-1.0.29-CBCx_N9a.js";import"./useScreenSize-1.0.29-C2BqwJQv.js";import"./useTableColumnOrder-1.0.29-BTwTNZ3x.js";var W;(function(e){e.csv="text/csv",e.tsv="text/tab-separated-values",e.plain="text/plain"})(W||(W={}));var M=e=>e,g=e=>e,V=M,Q=M,P=M,fe=M,xe=M,mr={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,fileExtension:"csv",mediaType:W.csv,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},ar=`\r
`,fr="\uFEFF",Y=e=>Object.assign({},mr,e);class xr extends Error{constructor(o){super(o),this.name="CsvGenerationError"}}class hr extends Error{constructor(o){super(o),this.name="EmptyHeadersError"}}class br extends Error{constructor(o){super(o),this.name="CsvDownloadEnvironmentError"}}class gr extends Error{constructor(o){super(o),this.name="UnsupportedDataFormatError"}}var jr=function(e,o){return o=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},vr=e=>fe(typeof e=="object"?e.key:e),yr=e=>xe(typeof e=="object"?e.displayLabel:e),wr=(e,...o)=>o.reduce((s,c)=>c(s),e),Sr=e=>o=>e.useBom?Q(g(o)+fr):o,Cr=e=>o=>e.showTitle?D(Q(g(o)+e.title))(P("")):o,D=e=>o=>Q(g(e)+g(o)+ar),ge=e=>(o,s)=>Tr(e)(P(g(o)+g(s))),Tr=e=>o=>M(g(o)+e.fieldSeparator),kr=(e,o)=>s=>{if(!e.showColumnHeaders)return s;if(o.length<1)throw new hr("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let c=P("");for(let a=0;a<o.length;a++){const i=yr(o[a]);c=ge(e)(c,je(e,g(i)))}return c=P(g(c).slice(0,-1)),D(s)(c)},Rr=(e,o,s)=>c=>{let a=c;for(var i=0;i<s.length;i++){let u=P("");for(let j=0;j<o.length;j++){const w=vr(o[j]),h=s[i][g(w)];u=ge(e)(u,je(e,h))}u=P(g(u).slice(0,-1)),a=D(a)(u)}return a},Or=e=>+e===e&&(!isFinite(e)||!!(e%1)),Er=(e,o)=>{if(Or(o)){if(e.decimalSeparator==="locale")return V(o.toLocaleString());if(e.decimalSeparator)return V(o.toString().replace(".",e.decimalSeparator))}return V(o.toString())},G=(e,o)=>{let s=o;return(e.quoteStrings||e.fieldSeparator&&o.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&o.indexOf(e.quoteCharacter)>-1||o.indexOf(`
`)>-1||o.indexOf("\r")>-1)&&(s=e.quoteCharacter+jr(o,e.quoteCharacter)+e.quoteCharacter),V(s)},Fr=(e,o)=>{const s=o?"true":"false";return V(e.boolDisplay[s])},Br=(e,o)=>typeof o>"u"&&e.replaceUndefinedWith!==void 0?G(e,e.replaceUndefinedWith+""):o===null?G(e,"null"):G(e,""),je=(e,o)=>{if(typeof o=="number")return Er(e,o);if(typeof o=="string")return G(e,o);if(typeof o=="boolean"&&e.boolDisplay)return Fr(e,o);if(o===null||typeof o>"u")return Br(e,o);throw new gr(`
    typeof ${typeof o} isn't supported. Only number, string, boolean, null and undefined are supported.
    Please convert the data in your object to one of those before generating the CSV.
    `)},Ar=e=>o=>{const s=Y(e),c=s.useKeysAsHeaders?Object.keys(o[0]):s.columnHeaders;let a=wr(Q(""),Sr(s),Cr(s),kr(s,c),Rr(s,c,o));if(g(a).length<1)throw new xr("Output is empty. Is your data formatted correctly?");return a},Nr=e=>o=>{const s=Y(e),c=g(o),a=s.useTextFile?"text/plain":s.mediaType;return new Blob([c],{type:`${a};charset=utf8;`})},_r=e=>o=>{if(!window)throw new br("Downloading only supported in a browser environment.");const s=Nr(e)(o),c=Y(e),a=c.useTextFile?"txt":c.fileExtension,i=`${c.filename}.${a}`,u=document.createElement("a");u.download=i,u.href=URL.createObjectURL(s),u.setAttribute("visibility","hidden"),document.body.appendChild(u),u.click(),document.body.removeChild(u)},Ir=Le();const Pr=({openSelection:e,setOpenSelection:o,appLanguage:s,columnLabels:c,availableColumns:a,selectedColumns:i,setSelectedColumns:u})=>{const j=ue("(max-width:900px)"),w=ue("(max-width:600px)");return l.jsx(nr,{open:e,onClose:()=>{o(!1)},children:l.jsxs(C,{sx:{position:"absolute",top:"25%",left:"50%",transform:"translate(-50%, -50%)",width:w?"80vw":j?"70vw":"60vw",maxWidth:"700px",bgcolor:"background.paper",boxShadow:24,borderRadius:"4px",p:4},children:[l.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-20px"},children:[l.jsx("h3",{children:s.selectFromList}),l.jsx(H,{onClick:()=>{o(!1)},children:l.jsx(Ue,{})})]}),l.jsx(be,{fullWidth:!0,children:l.jsx(ir,{multiple:!0,options:a,value:i,disableCloseOnSelect:!0,getOptionLabel:h=>c[h],onChange:(h,E)=>{u(E),h.stopPropagation()},renderInput:h=>l.jsx(dr,{...h}),renderTags:(h,E)=>h.map((v,y)=>{const{key:T,...F}=E({index:y});return l.jsx(cr,{variant:"outlined",label:c[v],...F},T)})})})]})})},Mr=({table:e,appId:o,metaData:s,bulkActions:c,tableStore:a,appLanguage:i,locale:u,refetch:j,componentWidth:w,aggregates:h})=>{p.debug(o,s,c);const E=or(),v=a.table,y=a.columns;tr(o),$e(o);const T=n=>{var r,t,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((t=s==null?void 0:s.columns[d])==null?void 0:t.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.data_type;return"varchar"},F=n=>{var r,t,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((t=s==null?void 0:s.columns[d])==null?void 0:t.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.column_type;return null},J=()=>_.map(n=>{const r={};for(let t=0;t<b.length;t++)r[N[b[t]]]=n[N[b[t]]];return r}),U=()=>{var n,r,t;return(n=s==null?void 0:s.src)!=null&&n.app_id?"ppBulkAction-"+s.src.app_id+"-"+s.src.cnt_id:(r=s==null?void 0:s.src)!=null&&r.dbs&&((t=s==null?void 0:s.src)!=null&&t.tbl)?"ppBulkAction-"+s.src.dbs+"-"+s.src.tbl:null};m.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdforientation");if(n!==null)return n}catch(n){p.debug(n)}return"landscape"}),m.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdfstyle");if(n!==null)return n}catch(n){p.debug(n)}return"striped"}),m.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-poweredBy");if(n!==null)return n==="true"}catch(n){p.debug(n)}return!0});let ee="csv";c.select!==void 0&&(ee="select");const[f,ve]=m.useState(ee),[ye,re]=m.useState(!1),we=m.useMemo(()=>Ie(),[]),S=We(o),B=m.useMemo(()=>{const n={};return y.filter(r=>r.lookup!==void 0&&S!==void 0&&S[r.columnName]!==void 0).map(r=>{var t;if(S!==void 0&&S[r.columnName]!==void 0){const x=[];for(const d in S[r.columnName]){const L={key:d,value:Array.isArray(S[r.columnName][d])?S[r.columnName][d].join((t=r.lookup)==null?void 0:t.delimiter):S[r.columnName][d]};x.push(L)}n[r.columnName]=x}}),n},[S,y]);p.debug("lookupColumns",B);const A=m.useMemo(()=>{const n={};return y.filter(r=>r.computedField!==void 0).map(r=>{n[r.columnName]=r.computedField}),n},[y]);p.debug(A);const N=m.useMemo(()=>{const n={};return y.map(r=>{A[r.columnName]?n[r.columnName]=A[r.columnName].label:n[r.columnName]=r.columnLabel}),n},[A,y]);p.debug(N);const Se=(n,r)=>{if(B!==void 0&&B[n]!==void 0){const t=B[n].filter(x=>x.key===r);if(Array.isArray(t)&&t.length===1)return t[0].value}return r},Z=e.getAllColumns(),k=e.getSelectedRowModel().rows,R=m.useMemo(()=>Z.filter(n=>n.id!=="mrt-row-actions"&&n.id!=="mrt-row-select"&&n.id!=="mrt-row-expand").map(n=>n.id),[]);p.debug(R);const oe=m.useMemo(()=>R.map(n=>{const r=F(n);if(r===null)return 20;if(r.indexOf("(")!==-1){let t=r.substring(r.indexOf("(")+1);return t.indexOf(")")!==-1&&(t=t.substring(0,t.indexOf(")"))),t.indexOf(".")!==-1&&(t=t.substring(0,t.indexOf("."))),t.indexOf(",")!==-1&&(t=t.substring(0,t.indexOf(","))),Number(t)}return null}),[R]);p.debug(oe);const[te,Hr]=m.useState(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n+"-wrapped-columns");if(r!==null)return JSON.parse(r)}catch(r){p.debug(r)}return R.filter((r,t)=>(oe[t]??99)<=20)});p.debug(te);const se=m.useMemo(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n);if(r!==null)return JSON.parse(r)}catch(r){p.debug(r)}return R},[R]);p.debug(se);const[b,Ce]=m.useState(se);p.debug(b);const _=k.map(n=>{const r={};return Z.map(t=>{t.id!=="mrt-row-actions"&&t.id!=="mrt-row-select"&&t.id!=="mrt-row-expand"&&(B!==void 0&&B[t.id]!==void 0?r[N[t.id]]=Se(t.id,n.getValue(t.id)):A[t.id]||(r[N[t.id]]=n.getValue(t.id)))}),r});p.debug(_);const ne=k.map(n=>{const r={};return Z.map(t=>{t.id!=="mrt-row-actions"&&t.id!=="mrt-row-select"&&t.id!=="mrt-row-expand"&&A[t.id]===void 0&&(r[t.id]=n.getValue(t.id))}),r});p.debug(ne);const q=()=>{var n,r;return(s==null?void 0:s.src)===void 0?o:s.src.app_id&&((r=(n=s==null?void 0:s.app)==null?void 0:n.app[0])==null?void 0:r.app_title)!==""?s.app.app[0].app_title:s.src.dbs?s.src.tbl:o},le=Y({filename:q(),fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),[Te,Jr]=m.useState(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n+"-pdf-title");if(r!==null)return r}catch(r){p.debug(r)}return q()});p.debug("pdfTitle",Te);const ke=async()=>{},Re=()=>{const n=Ar(le)(J());_r(le)(n)},Oe=()=>{$(new Blob([JSON.stringify(J())],{type:"text/json;charset=utf-8"}),q()+".json")};m.useRef();const Ee=()=>{const n=k.map(t=>{const x={};for(let d=0;d<b.length;d++)t.original[b[d]]!==void 0&&(x[b[d]]=t.original[b[d]]??"");return{row:x}}),r=Ir.toXML({table:n});$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".xml")},Fe=()=>{const n=Ve(o);p.debug(n);let r="insert into "+n.tbl+" (";for(const t in _[0])r+=t+",";r=r.slice(0,-1)+") values ";for(let t=0;t<_.length;t++){const x=_[t];r+="(";for(const d in x){const L=He(T(d));x[d]===null?r+="null,":L==="number"?r+=x[d]+",":r+="'"+x[d]+"',"}r=r.slice(0,-1),r+="),"}r=r.slice(0,-1)+";",$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".sql")},Be=()=>{for(let n=0;n<_.length;n++){const r=Je(s,ne[n]);er(o,r,t=>{if(t!=null&&t.code&&(t!=null&&t.message))switch(t.code){case"ok":K(i.deletedSuccessful,{variant:"success"}),j();break;default:p.error(t),K(t.message??i.invalidResponse,{variant:"error"})}else p.error(t),K(i.invalidResponse,{variant:"error"})},t=>{p.error("error",t),K(t??i.invalidResponse,{variant:"error"})})}e.setRowSelection({})},Ae=()=>null,Ne=()=>null;m.useState(0),m.useState(0);const[_e,ie]=m.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsx(Xe,{variant:"popover",popupId:we,children:n=>{var r;return l.jsxs(l.Fragment,{children:[w<900?l.jsx(X,{title:i.bulkActions,children:l.jsx(H,{...ce(n),children:l.jsx(de,{})})}):l.jsx(z,{variant:"contained",endIcon:l.jsx(de,{}),...ce(n),children:i.bulkActions}),a.state.relTab===!0&&l.jsx(z,{variant:"contained",startIcon:l.jsx(Ke,{}),sx:{marginLeft:"10px"},onClick:()=>{E(Pe({appId:o,property:{isRelTabOpen:!1}}))},children:i.back}),l.jsx(lr,{...Qe(n),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:l.jsxs(C,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[v.clientSideProcessing===!0?l.jsxs(C,{sx:{textAlign:"center",display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[k.length===0?l.jsx(pe,{sx:{textAlign:"center"},children:i.noRowsSelected}):l.jsx("span",{}),l.jsx(be,{children:l.jsx(O,{control:l.jsx(ur,{className:"pp-checkbox",checked:k.length>0,onChange:()=>{e.toggleAllRowsSelected()}}),label:l.jsx(C,{sx:{display:"flex",alignItems:"center"},children:i.selectAll})})})]}):l.jsx(l.Fragment,{children:k.length===0&&l.jsx(C,{sx:{textAlign:"center"},children:l.jsx(pe,{children:i.noRowsSelected})})}),l.jsxs(pr,{value:f,onChange:(t,x)=>{ve(x),t.stopPropagation()},children:[Ae(),c.csv&&l.jsx(O,{value:"csv",label:i.exportToCsv,control:l.jsx(I,{})}),c.json&&l.jsx(O,{value:"json",label:i.exportToJson,control:l.jsx(I,{})}),Ne(),c.xml&&l.jsx(O,{value:"xml",label:i.exportToXml,control:l.jsx(I,{})}),c.sql&&!Me(o)&&l.jsx(O,{value:"sql",label:i.exportToSql,control:l.jsx(I,{})}),((r=s==null?void 0:s.privs)==null?void 0:r.delete)&&!qe(s)&&(c==null?void 0:c.delete)===!0&&v.transactions.delete&&l.jsx(O,{value:"delete",label:i.deletePermanently,control:l.jsx(I,{})}),(c.select??!1)&&l.jsx(O,{value:"select",label:i.addSelectedRow,control:l.jsx(I,{})})]}),l.jsxs(C,{sx:{display:"grid",gridTemplateColumns:f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"?"1fr auto":"1fr",gap:"10px"},children:[l.jsx(z,{variant:"contained",onClick:()=>{if(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"){const t=U();if(t!==null)try{localStorage.setItem(t,JSON.stringify(b)),localStorage.setItem(t+"-wrapped-columns",JSON.stringify(te))}catch(x){p.debug(x)}}switch(f){case"pdf":ke();break;case"csv":Re();break;case"json":Oe();break;case"excel":break;case"xml":Ee();break;case"sql":Fe();break;case"delete":re(!0);break}},disabled:k.length===0||(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&(b==null?void 0:b.length)===0,children:i.apply}),(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&l.jsx(X,{title:u.showHideColumns,children:l.jsx(H,{onClick:()=>{ie(!0)},children:l.jsx(ze,{})})})]})]})})]})}}),l.jsx(rr,{title:i.deleteRowsTitle,message:i.deleteRowsMessage,open:ye,setOpen:re,onConfirm:()=>{Be()},theme:sr}),l.jsx(Pr,{openSelection:_e,setOpenSelection:ie,appLanguage:i,columnLabels:N,availableColumns:R,selectedColumns:b,setSelectedColumns:Ce})]})},qr=m.lazy(()=>he(()=>import("./TableChart-1.0.29-DYrO55LT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]),import.meta.url)),Vr=m.lazy(()=>he(()=>import("./TableToolbarInlineEditingButton-1.0.29-By5uRHXI.js"),__vite__mapDeps([40,1,2,3,41,30,14,8,9,10,11,42,17,43,12,7,13,44,45,46,6,15,16,37,47,48,49,20,50,51,26,32,52,34,35,25,33,53,22,54,55,56,38,23,21,24,39,57,58,5,59,60,61,27,62,63,64,65,66,67,68,28,69,70,71,72,31,73,74,75,76,77,78,79,80,81,82,83,84,36,85]),import.meta.url)),ht=({table:e,metaData:o,appId:s,bulkActions:c,hasBulkActions:a,tableStore:i,appLanguage:u,locale:j,refetch:w,showForm:h,appSettings:E,componentWidth:v,aggregates:y})=>{var F;const T=i.table;return De(s),l.jsxs(C,{sx:{display:"flex",flexWrap:"nowrap",gap:v<600?"0":"8px",alignItems:"center",whiteSpace:"nowrap"},className:"pp-toolbar-buttons",children:[l.jsx(X,{arrow:!0,title:u.refresh,className:"ppToolbarRefreshIcon",children:l.jsx(H,{onClick:()=>w(),children:l.jsx(Ge,{})})}),((F=T==null?void 0:T.transactions)==null?void 0:F.insert)&&l.jsx(l.Fragment,{children:v<900?l.jsx(X,{title:u.newRow,children:l.jsx(H,{onClick:()=>{h(null,me.INSERT)},children:l.jsx(Ye,{})})}):l.jsx(z,{variant:"contained",startIcon:l.jsx(Ze,{}),onClick:()=>{h(null,me.INSERT)},children:u.newRow})}),a&&l.jsx(Mr,{table:e,appId:s,metaData:o,bulkActions:c,tableStore:i,appLanguage:u,locale:j,refetch:w,componentWidth:v,aggregates:y}),i.table.charts.enabled===!0&&l.jsx(m.Suspense,{fallback:l.jsx(ae,{}),children:l.jsx(qr,{appId:s,componentWidth:v,table:e,tableStore:i,metaData:o,appLanguage:u})}),i.table.inlineEditing.addColumnButton===!1&&i.columns.filter(J=>J.inlineEditing===!0).length>0&&l.jsx(m.Suspense,{fallback:l.jsx(ae,{}),children:l.jsx(Vr,{appId:s,metaData:o,locale:j,appLanguage:u,componentWidth:v,refetch:w})}),!1]})};export{ht as default};
