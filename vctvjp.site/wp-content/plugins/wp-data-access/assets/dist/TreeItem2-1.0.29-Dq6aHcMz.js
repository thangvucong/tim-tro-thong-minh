import{_ as i,j as y,a as ie}from"./cm-1.0.29-B-jRz_ox.js";import{r as E}from"./redux-1.0.29-C1Q38y1F.js";import{i as L,w as H,p as G,c as ce,o as de}from"./Typography-1.0.29-DKDDWYKJ.js";import{u as ee,h as Y,a as Z,c as pe,k as ue,j as ae,d as be,e as ge,T as fe,b as me,f as xe,g as Ie,i as ye}from"./TreeItem2Provider-1.0.29-rBK9p3Tt.js";import{a as se,e as v,r as re}from"./iconBase-1.0.29-DWX4ew0u.js";import{C as Pe}from"./Collapse-1.0.29-BdBN3O_f.js";import{C as Ce}from"./Checkbox-1.0.29-DTq3kp48.js";import{H as S}from"./index-1.0.29-Dlm2kjka.js";const le=e=>Array.isArray(e)?e.length>0&&e.some(le):!!e,Te=({itemId:e,children:s})=>{const{instance:n,selection:{multiSelect:b},publicAPI:I}=ee(),g={expandable:le(s),expanded:n.isItemExpanded(e),focused:n.isItemFocused(e),selected:n.isItemSelected(e),disabled:n.isItemDisabled(e),editing:n!=null&&n.isItemBeingEdited?n==null?void 0:n.isItemBeingEdited(e):!1,editable:n.isItemEditable?n.isItemEditable(e):!1},k=r=>{if(g.disabled)return;g.focused||n.focusItem(r,e);const C=b&&(r.shiftKey||r.ctrlKey||r.metaKey);g.expandable&&!(C&&n.isItemExpanded(e))&&n.toggleItemExpansion(r,e)},f=r=>{if(g.disabled)return;g.focused||n.focusItem(r,e),b&&(r.shiftKey||r.ctrlKey||r.metaKey)?r.shiftKey?n.expandSelectionRange(r,e):n.selectItem({event:r,itemId:e,keepExistingSelection:!0}):n.selectItem({event:r,itemId:e,shouldBeSelected:!0})},P=r=>{const C=r.nativeEvent.shiftKey;b&&C?n.expandSelectionRange(r,e):n.selectItem({event:r,itemId:e,keepExistingSelection:b,shouldBeSelected:r.target.checked})},l=()=>{Y(n,Z)&&n.isItemEditable(e)&&(n.isItemBeingEdited(e)?n.setEditedItemId(null):n.setEditedItemId(e))};return{interactions:{handleExpansion:k,handleSelection:f,handleCheckboxSelection:P,toggleItemEditing:l,handleSaveItemLabel:(r,C)=>{Y(n,Z)&&n.isItemBeingEditedRef(e)&&(n.updateItemLabel(e,C),l(),n.focusItem(r,e))},handleCancelItemLabelEditing:r=>{Y(n,Z)&&n.isItemBeingEditedRef(e)&&(l(),n.focusItem(r,e))}},status:g,publicAPI:I}},ve=e=>{const{runItemPlugins:s,items:{onItemClick:n,disabledItemsFocusable:b,indentationAtItemLevel:I},selection:{disableSelection:g,checkboxSelection:k},expansion:{expansionTrigger:f},treeId:P,instance:l,publicAPI:m}=ee(),R=E.useContext(pe),{id:h,itemId:r,label:C,children:A,rootRef:_}=e,{rootRef:U,contentRef:z,propsEnhancers:x}=s(e),{interactions:u,status:d}=Te({itemId:r,children:A}),p=E.useRef(null),w=E.useRef(null),j=se(_,U,p),M=se(z,w),K=E.useRef(null),B=ue({itemId:r,treeId:P,id:h}),W=l.canItemBeTabbed(r)?0:-1,D={rootRefObject:p,contentRefObject:w,interactions:u},q=o=>t=>{var c;if((c=o.onFocus)==null||c.call(o,t),t.defaultMuiPrevented)return;const a=!d.disabled||b;!d.focused&&a&&t.currentTarget===t.target&&l.focusItem(t,r)},F=o=>t=>{var c,T,O,oe,ne;if((c=o.onBlur)==null||c.call(o,t),t.defaultMuiPrevented)return;const a=l.getItemDOMElement(r);d.editing||t.relatedTarget&&ae(t.relatedTarget,a)&&(t.target&&((O=(T=t.target)==null?void 0:T.dataset)==null?void 0:O.element)==="labelInput"&&ae(t.target,a)||((ne=(oe=t.relatedTarget)==null?void 0:oe.dataset)==null?void 0:ne.element)==="labelInput")||l.removeFocusedItem()},J=o=>t=>{var a,c,T;(a=o.onKeyDown)==null||a.call(o,t),!(t.defaultMuiPrevented||((T=(c=t.target)==null?void 0:c.dataset)==null?void 0:T.element)==="labelInput")&&l.handleItemKeyDown(t,r)},$=o=>t=>{var a;(a=o.onDoubleClick)==null||a.call(o,t),!t.defaultMuiPrevented&&u.toggleItemEditing()},Q=o=>t=>{var a,c;(a=o.onClick)==null||a.call(o,t),n==null||n(t,r),!(t.defaultMuiPrevented||(c=K.current)!=null&&c.contains(t.target))&&(f==="content"&&u.handleExpansion(t),k||u.handleSelection(t))},V=o=>t=>{var a;(a=o.onMouseDown)==null||a.call(o,t),!t.defaultMuiPrevented&&(t.shiftKey||t.ctrlKey||t.metaKey||d.disabled)&&t.preventDefault()},X=o=>t=>{var a;(a=o.onChange)==null||a.call(o,t),!t.defaultMuiPrevented&&(g||d.disabled||u.handleCheckboxSelection(t))},N=o=>t=>{var a;(a=o.onClick)==null||a.call(o,t),!t.defaultMuiPrevented&&f==="iconContainer"&&u.handleExpansion(t)};return{getRootProps:(o={})=>{var O;const t=i({},v(e),v(o));let a;d.selected?a=!0:g||d.disabled?a=void 0:a=!1;const c=i({},t,{ref:j,role:"treeitem",tabIndex:W,id:B,"aria-expanded":d.expandable?d.expanded:void 0,"aria-selected":a,"aria-disabled":d.disabled||void 0},o,{onFocus:q(t),onBlur:F(t),onKeyDown:J(t)});I&&(c.style={"--TreeView-itemDepth":typeof R=="function"?R(r):R});const T=((O=x.root)==null?void 0:O.call(x,i({},D,{externalEventHandlers:t})))??{};return i({},c,T)},getContentProps:(o={})=>{var T;const t=v(o),a=i({},t,o,{ref:M,onClick:Q(t),onMouseDown:V(t),status:d});I&&(a.indentationAtItemLevel=!0);const c=((T=x.content)==null?void 0:T.call(x,i({},D,{externalEventHandlers:t})))??{};return i({},a,c)},getGroupTransitionProps:(o={})=>{const t=v(o),a=i({},t,{unmountOnExit:!0,component:"ul",role:"group",in:d.expanded,children:A},o);return I&&(a.indentationAtItemLevel=!0),a},getIconContainerProps:(o={})=>{const t=v(o);return i({},t,o,{onClick:N(t)})},getCheckboxProps:(o={})=>{const t=v(o);return i({},t,{visible:k,ref:K,checked:d.selected,disabled:g||d.disabled,tabIndex:-1},o,{onChange:X(t)})},getLabelProps:(o={})=>{const t=i({},v(o)),a=i({},t,{children:C},o,{onDoubleClick:$(t)});return l.isTreeViewEditable&&(a.editable=d.editable),a},getLabelInputProps:(o={})=>{var c;const t=v(o),a=((c=x.labelInput)==null?void 0:c.call(x,{rootRefObject:p,contentRefObject:w,externalEventHandlers:t,interactions:u}))??{};return i({},o,a)},getDragAndDropOverlayProps:(o={})=>{var c;const t=v(o),a=((c=x.dragAndDropOverlay)==null?void 0:c.call(x,i({},D,{externalEventHandlers:t})))??{};return i({},o,a)},rootRef:j,status:d,publicAPI:m}},Se=ve;function ke(e){const{slots:s,slotProps:n,status:b}=e,I=ee(),g=i({},I.icons.slots,{expandIcon:I.icons.slots.expandIcon??be,collapseIcon:I.icons.slots.collapseIcon??ge}),k=I.icons.slotProps;let f;s!=null&&s.icon?f="icon":b.expandable?b.expanded?f="collapseIcon":f="expandIcon":f="endIcon";const P=(s==null?void 0:s[f])??g[f],l=S({elementType:P,externalSlotProps:m=>i({},re(k[f],m),re(n==null?void 0:n[f],m)),ownerState:{}});return P?y.jsx(P,i({},l)):null}const Re=["visible"],we=["id","itemId","label","disabled","children","slots","slotProps"],De=Ie(),Ee=L("li",{name:"MuiTreeItem2",slot:"Root",overridesResolver:(e,s)=>s.root})({listStyle:"none",margin:0,padding:0,outline:0}),Le=L("div",{name:"MuiTreeItem2",slot:"Content",overridesResolver:(e,s)=>s.content,shouldForwardProp:e=>H(e)&&e!=="status"&&e!=="indentationAtItemLevel"})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}},{props:({status:s})=>s.disabled,style:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"}},{props:({status:s})=>s.focused,style:{backgroundColor:(e.vars||e).palette.action.focus}},{props:({status:s})=>s.selected,style:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:G(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:G(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:G(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},{props:({status:s})=>s.selected&&s.focused,style:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:G(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}]})),Oe=L("div",{name:"MuiTreeItem2",slot:"Label",overridesResolver:(e,s)=>s.label,shouldForwardProp:e=>H(e)&&e!=="editable"})(({theme:e})=>i({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative",overflow:"hidden"},e.typography.body1,{variants:[{props:({editable:s})=>s,style:{paddingLeft:"2px"}}]})),he=L("div",{name:"MuiTreeItem2",slot:"IconContainer",overridesResolver:(e,s)=>s.iconContainer})({width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}}),Ae=L(Pe,{name:"MuiTreeItem2",slot:"GroupTransition",overridesResolver:(e,s)=>s.groupTransition,shouldForwardProp:e=>H(e)&&e!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),je=L(E.forwardRef((e,s)=>{const{visible:n}=e,b=ie(e,Re);return n?y.jsx(Ce,i({},b,{ref:s})):null}),{name:"MuiTreeItem2",slot:"Checkbox",overridesResolver:(e,s)=>s.checkbox})({padding:0}),Me=e=>{const{classes:s}=e;return de({root:["root"],content:["content"],expanded:["expanded"],editing:["editing"],editable:["editable"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],groupTransition:["groupTransition"],labelInput:["labelInput"],dragAndDropOverlay:["dragAndDropOverlay"]},ye,s)},Ye=E.forwardRef(function(s,n){const b=De({props:s,name:"MuiTreeItem2"}),{id:I,itemId:g,label:k,disabled:f,children:P,slots:l={},slotProps:m={}}=b,R=ie(b,we),{getRootProps:h,getContentProps:r,getIconContainerProps:C,getCheckboxProps:A,getLabelProps:_,getGroupTransitionProps:U,getLabelInputProps:z,getDragAndDropOverlayProps:x,status:u}=Se({id:I,itemId:g,children:P,label:k,disabled:f}),d=i({},b,u),p=Me(d),w=l.root??Ee,j=S({elementType:w,getSlotProps:h,externalForwardedProps:R,externalSlotProps:m.root,additionalProps:{ref:n},ownerState:{},className:p.root}),M=l.content??Le,K=S({elementType:M,getSlotProps:r,externalSlotProps:m.content,ownerState:{},className:ce(p.content,u.expanded&&p.expanded,u.selected&&p.selected,u.focused&&p.focused,u.disabled&&p.disabled,u.editing&&p.editing,u.editable&&p.editable)}),B=l.iconContainer??he,W=S({elementType:B,getSlotProps:C,externalSlotProps:m.iconContainer,ownerState:{},className:p.iconContainer}),D=l.label??Oe,q=S({elementType:D,getSlotProps:_,externalSlotProps:m.label,ownerState:{},className:p.label}),F=l.checkbox??je,J=S({elementType:F,getSlotProps:A,externalSlotProps:m.checkbox,ownerState:{},className:p.checkbox}),$=l.groupTransition??void 0,Q=S({elementType:$,getSlotProps:U,externalSlotProps:m.groupTransition,ownerState:{},className:p.groupTransition}),V=l.labelInput??fe,X=S({elementType:V,getSlotProps:z,externalSlotProps:m.labelInput,ownerState:{},className:p.labelInput}),N=l.dragAndDropOverlay??me,te=S({elementType:N,getSlotProps:x,externalSlotProps:m.dragAndDropOverlay,ownerState:{},className:p.dragAndDropOverlay});return y.jsx(xe,{itemId:g,children:y.jsxs(w,i({},j,{children:[y.jsxs(M,i({},K,{children:[y.jsx(B,i({},W,{children:y.jsx(ke,{status:u,slots:l,slotProps:m})})),y.jsx(F,i({},J)),u.editing?y.jsx(V,i({},X)):y.jsx(D,i({},q)),y.jsx(N,i({},te))]})),P&&y.jsx(Ae,i({as:$},Q))]}))})});export{Ye as T};
