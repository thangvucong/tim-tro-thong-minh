import{P as p}from"./index-1.0.29-CZwhy2eo.js";import{r as c,b as U}from"./redux-1.0.29-C1Q38y1F.js";function v(n){if(typeof window>"u")return n;const t=c.useRef(null);return c.useLayoutEffect(()=>{t.current=n}),c.useCallback((...u)=>{var s;(s=t.current)===null||s===void 0||s.call(t,...u)},[])}const N={};function A(n,t){N[n]||(N[n]=!0,console.error("[material-ui-popup-state] WARNING",t))}const q={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1},R=U,L="useId"in R?()=>R.useId():()=>{};function M({parentPopupState:n,popupId:t=L(),variant:u,disableAutoFocus:s}){const f=c.useRef(!0);c.useEffect(()=>(f.current=!0,()=>{f.current=!1}),[]);const[d,a]=c.useState(q),i=c.useCallback(o=>{f.current&&a(o)},[]),_=c.useCallback(o=>i(e=>({...e,setAnchorElUsed:!0,anchorEl:o??void 0})),[]),S=v(o=>(d.isOpen?E(o):b(o),d)),b=v(o=>{const e=o instanceof Element?void 0:o,r=o instanceof Element?o:(o==null?void 0:o.currentTarget)instanceof Element?o.currentTarget:void 0;if((e==null?void 0:e.type)==="touchstart"){i(l=>({...l,_deferNextOpen:!0}));return}const y=e==null?void 0:e.clientX,C=e==null?void 0:e.clientY,B=typeof y=="number"&&typeof C=="number"?{left:y,top:C}:void 0,T=l=>{if(!o&&!l.setAnchorElUsed&&u!=="dialog"&&A("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),n){if(!n.isOpen)return l;setTimeout(()=>n._setChildPopupState(m))}const g={...l,isOpen:!0,anchorPosition:B,hovered:(e==null?void 0:e.type)==="mouseover"||l.hovered,focused:(e==null?void 0:e.type)==="focus"||l.focused,_openEventType:e==null?void 0:e.type};return l.setAnchorElUsed||(e!=null&&e.currentTarget?g.anchorEl=e==null?void 0:e.currentTarget:r&&(g.anchorEl=r)),g};i(l=>l._deferNextOpen?(setTimeout(()=>i(T),0),{...l,_deferNextOpen:!1}):T(l))}),h=o=>{const{_childPopupState:e}=o;return setTimeout(()=>{e==null||e.close(),n==null||n._setChildPopupState(null)}),{...o,isOpen:!1,hovered:!1,focused:!1}},E=v(o=>{const e=o instanceof Element?void 0:o;if((e==null?void 0:e.type)==="touchstart"){i(r=>({...r,_deferNextClose:!0}));return}i(r=>r._deferNextClose?(setTimeout(()=>i(h),0),{...r,_deferNextClose:!1}):h(r))}),I=c.useCallback((o,e)=>{o?b(e):E(e)},[]),k=v(o=>{const{relatedTarget:e}=o;i(r=>r.hovered&&!(e instanceof Element&&P(e,m))?r.focused?{...r,hovered:!1}:h(r):r)}),w=v(o=>{if(!o)return;const{relatedTarget:e}=o;i(r=>r.focused&&!(e instanceof Element&&P(e,m))?r.hovered?{...r,focused:!1}:h(r):r)}),F=c.useCallback(o=>i(e=>({...e,_childPopupState:o})),[]),m={...d,setAnchorEl:_,popupId:t??void 0,variant:u,open:b,close:E,toggle:S,setOpen:I,onBlur:w,onMouseLeave:k,disableAutoFocus:s??!!(d.hovered||d.focused),_setChildPopupState:F};return m}function O({isOpen:n,popupId:t,variant:u}){return{...u==="popover"?{"aria-haspopup":!0,"aria-controls":n?t:void 0}:u==="popper"?{"aria-describedby":n?t:void 0}:void 0}}function G(n){return{...O(n),onClick:n.open,onTouchStart:n.open}}function $({isOpen:n,anchorEl:t,anchorPosition:u,close:s,popupId:f,onMouseLeave:d,disableAutoFocus:a,_openEventType:i}){return{id:f,anchorEl:t,anchorPosition:u,anchorReference:i==="contextmenu"?"anchorPosition":"anchorEl",open:n,onClose:s,onMouseLeave:d,...a&&{disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function W(n,{popupId:t}){if(!t)return null;const u=typeof n.getRootNode=="function"?n.getRootNode():document;return typeof u.getElementById=="function"?u.getElementById(t):null}function P(n,t){const{anchorEl:u,_childPopupState:s}=t;return x(u,n)||x(W(n,t),n)||s!=null&&P(n,s)}function x(n,t){if(!n)return!1;for(;t;){if(t===n)return!0;t=t.parentElement}return!1}function X({children:n,popupId:t,variant:u,parentPopupState:s,disableAutoFocus:f}){const d=M({popupId:t,variant:u,parentPopupState:s,disableAutoFocus:f}),a=n(d);return a??null}X.propTypes={children:p.func.isRequired,popupId:p.string,variant:p.oneOf(["popover","popper"]).isRequired,parentPopupState:p.object,disableAutoFocus:p.bool};export{X as P,$ as a,G as b};
