const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.29-W2wsdXxK.js","./cm-1.0.29-B-jRz_ox.js","./redux-1.0.29-C1Q38y1F.js","./vendor-1.0.29-BmpNFhoq.js","./useMetadataColumns-1.0.29-BsHQRwuU.js","./index-1.0.29-Dlm2kjka.js","./Typography-1.0.29-DKDDWYKJ.js","./lib-1.0.29-C3pCU2AT.js","./loglevel-1.0.29-BZ7XahX3.js","./lodash-1.0.29-CLFJOMhY.js","./moment-1.0.29-C5S46NFB.js","./iconBase-1.0.29-DWX4ew0u.js","./notistack-1.0.29-DTteiN_s.js","./useTheme-1.0.29-BG2eLrmM.js","./RestApi-1.0.29-D1Nj1ewF.js","./index-1.0.29-D3hJYFO0.js","./useStoreTable-1.0.29-0wdtptv-.js","./useFormStore-1.0.29-CIRQu4I8.js","./Spinner-1.0.29-BS14fgdJ.js","./CardContent-1.0.29-D9omFsvB.js","./AdminTheme-1.0.29-j2gnN0Eb.js","./index-1.0.29-2NwfYhFo.js","./ActionsDml-1.0.29-CLWi12Fx.js","./index-1.0.29-BOWxC8Fi.js","./TextField-1.0.29-DGwcptkL.js","./FormHelperText-1.0.29-DrHduTUH.js","./useFormControl-1.0.29-DBjraibe.js","./FormLabel-1.0.29-V40o0R6-.js","./Menu-1.0.29-DOOr2lTO.js","./ThemeProvider-1.0.29-6fkyOh-r.js","./useControlled-1.0.29-gPCMf8hr.js","./createSvgIcon-1.0.29-DRHeS-Ok.js","./MenuItem-1.0.29-hQUyAg_Q.js","./index-1.0.29-DPiWw_1S.js","./useTableUpdater-1.0.29-CrKOH01n.js","./Stepper-1.0.29-D0D6VEv9.js","./StepContent-1.0.29-DbILWCXM.js","./Collapse-1.0.29-BdBN3O_f.js","./FormControlLabel-1.0.29-BWMy6Yxq.js","./Checkbox-1.0.29-DTq3kp48.js","./SwitchBase-1.0.29-aa8fP0Df.js","./ConfirmDialog-1.0.29-CS4WrjWL.js","./DialogContent-1.0.29-DSOFFK1-.js","./ConfirmDialog-1.0.29--D4jr2go.css","./Link-1.0.29-CGZTGwg7.js","./Accordion-1.0.29-DSoQZht0.js","./AccordionSummary-1.0.29-Chfx7bsr.js","./AccordionDetails-1.0.29-BFK0928d.js","./Switch-1.0.29-CFPuiCpy.js","./main-1.0.29.js","./useFormUpdater-1.0.29-_ipjKY-B.js","./PremiumFeature-1.0.29-D7ok1IXl.js","./Slider-1.0.29-Bfsw0S30.js","./visuallyHidden-1.0.29-Dan1xhjv.js","./RadioGroup-1.0.29-DlKNzHJO.js","./Radio-1.0.29-DtS8PS_A.js","./EnumTypeEnum-1.0.29-Ws4BsaYD.js","./react-number-format.es-1.0.29-CwrJHflX.js","./ResizableDrawer-1.0.29-s3ezSMWr.js","./useScreenSize-1.0.29-C2BqwJQv.js","./SettingsForm-1.0.29-BbHAoqtE.js","./CssUnitTextField-1.0.29-CXDdTLwe.js","./SettingsFormRelationships-1.0.29-BaOn4GDn.js","./ComponentColumn-1.0.29-C2oYH4av.js","./ActionsExplorer-1.0.29-Bd4N6XcI.js","./Autocomplete-1.0.29-BeVKfuIu.js","./Close-1.0.29-DMVND8Dd.js","./Popper-1.0.29-DA77uIz-.js","./ActionsApp-1.0.29-Dk9xbJUd.js","./Tooltip-1.0.29-D8cmS8RQ.js","./ToggleButtonGroup-1.0.29-DLo1QKzQ.js","./ThemeSettings-1.0.29-EwVOQg25.js","./index-1.0.29--cvqXtNy.js","./Stack-1.0.29-Be5OvNOr.js","./SettingsFormCode-1.0.29-CSjzyJJq.js","./index-1.0.29-DewteZsJ.js","./index-1.0.29-CZwhy2eo.js","./index-1.0.29-DNyiXtkx.js","./TreeItem2-1.0.29-Dq6aHcMz.js","./TreeItem2Provider-1.0.29-rBK9p3Tt.js","./FormContainer-1.0.29-Bc2qt4Ga.js","./ThemeContainer-1.0.29-CLFqgikx.js","./FallbackSpinner-1.0.29-Bxoz_pLD.js","./dompurify-1.0.29-CCJo14B2.js","./dayjs.min-1.0.29-DcSvnIA7.js","./CardActions-1.0.29-m2umL7cE.js","./FormContainer-1.0.29-DR7D6eET.css"])))=>i.map(i=>d[i]);
import{_ as d}from"./main-1.0.29.js";import{j as e}from"./cm-1.0.29-B-jRz_ox.js";import{r as o}from"./redux-1.0.29-C1Q38y1F.js";import{l as i,K as W,S as c,ax as D,ae as X,P as Y,a as y,bV as J,s as Q,c1 as Z,c2 as $,b as S,c3 as ee}from"./lib-1.0.29-C3pCU2AT.js";import{u as T,a as te}from"./RestApi-1.0.29-D1Nj1ewF.js";import{A as L}from"./AdminTheme-1.0.29-j2gnN0Eb.js";import{d as se}from"./ActionsSettings-1.0.29-CQwexJxa.js";import{S as oe}from"./ScopeEnum-1.0.29-B4DDvIDj.js";import{e as u}from"./notistack-1.0.29-DTteiN_s.js";import{T as h,C as re}from"./ConfirmDialog-1.0.29-CS4WrjWL.js";import{n as ie,j as ne,f as le,l as ae}from"./index-1.0.29-DNyiXtkx.js";import{A as me,T as ce,M as ue}from"./index-1.0.29-Dlm2kjka.js";import{B as de,a as pe,T as fe,b}from"./TabPanel-1.0.29-CHhWjnrS.js";import{u as ge}from"./useFormStore-1.0.29-CIRQu4I8.js";import{T as z}from"./TargetEnum-1.0.29-DPFnTxiX.js";import{S as f,B as xe}from"./Spinner-1.0.29-BS14fgdJ.js";import{B as Se}from"./settings-1.0.29-CBCx_N9a.js";import{D as he}from"./useTheme-1.0.29-BG2eLrmM.js";import{T as be}from"./Typography-1.0.29-DKDDWYKJ.js";import{I as j}from"./iconBase-1.0.29-DWX4ew0u.js";import{C as O,a as P,B as _}from"./CardContent-1.0.29-D9omFsvB.js";import"./vendor-1.0.29-BmpNFhoq.js";import"./loglevel-1.0.29-BZ7XahX3.js";import"./lodash-1.0.29-CLFJOMhY.js";import"./moment-1.0.29-C5S46NFB.js";import"./DialogContent-1.0.29-DSOFFK1-.js";import"./Menu-1.0.29-DOOr2lTO.js";import"./ThemeProvider-1.0.29-6fkyOh-r.js";import"./MenuItem-1.0.29-hQUyAg_Q.js";import"./index-1.0.29-D3hJYFO0.js";const je=t=>{const r=T(n=>{var p,l;return(l=(p=n.forms[t])==null?void 0:p.state)==null?void 0:l.isUpdated});return i.debug("isUpdated",r),r},_e=t=>{const r=T(n=>n.ui.formSettings.isOpen&&n.ui.formSettings.appId===t);return i.debug(t,r),r},Te=()=>{const t=T(r=>r.ui.formSettings.hideThemeSettings);return i.debug("hideThemeSetting",t),t},ve=o.lazy(()=>d(()=>import("./SettingsColumns-1.0.29-W2wsdXxK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57]),import.meta.url)),Ce=o.lazy(()=>d(()=>import("./ResizableDrawer-1.0.29-s3ezSMWr.js"),__vite__mapDeps([58,1,2,3,59,7,8,9,10,14,6,29,11,28,5,12]),import.meta.url)),Fe=o.lazy(()=>d(()=>import("./SettingsForm-1.0.29-BbHAoqtE.js"),__vite__mapDeps([60,1,2,3,7,8,9,10,14,50,51,23,11,6,20,27,26,5,12,45,28,29,30,37,46,47,25,54,55,40,31,38,48,61,24,18,19,44,13,15,62,63,64,65,66,67,68,39,69,32,70,35,36,41,42,43,33]),import.meta.url)),ke=o.lazy(()=>d(()=>import("./ThemeSettings-1.0.29-EwVOQg25.js"),__vite__mapDeps([71,1,2,3,14,7,8,9,10,13,15,6,5,11,12,51,23,20,27,26,72,18,25,48,40,30,73,42,28,29,52,53,38,44,54,55,31,61,24,19,45,37,46,47]),import.meta.url));o.lazy(()=>d(()=>import("./SettingsFormCode-1.0.29-CSjzyJJq.js"),__vite__mapDeps([74,1,2,3,75,76,42,6,7,8,9,10,5,11,12,28,29,41,20,19,43,77,14,69,67,30,18,78,79,31,37,39,40,26,51,23,27,80,49,22,81,13,15,82,59,16,83,84,85,86,45,46]),import.meta.url));const it=({appId:t})=>{var R,A;i.debug(t);const r=te(),n=Te(),[p]=o.useState(W.getSelectors().selectTableById(c.getState().tables,t));i.debug(p);const[l,M]=o.useState(D.getSelectors().selectForm(c.getState().forms,t));i.debug(l);const U=ge(t),[V,Be]=o.useState(X.getSelectors().selectThemeById(c.getState().themes,t));i.debug(V);const v=je(t),g=m=>{r(J({appId:t,isUpdated:m}))},[N,C]=o.useState(!1),w=((R=L)==null?void 0:R.palette.mode)===Y.LIGHT?(A=L)==null?void 0:A.palette.primary.main:"",F=m=>{r(Q({anchor:m}))},k=()=>{l!==void 0&&r(Z({appId:t,formState:l}))},a=()=>{r($({})),g(!1)},x=()=>{v?C(!0):(k(),a())},B=()=>{{const m=c.getState().ui.formSettings;se(t,oe.GLOBAL,m.isRelationTable===!0?z.RFORM:z.FORM,s=>{if(i.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":M(D.getSelectors().selectForm(c.getState().forms,t)),u(s.message,{variant:"success"}),U.columns.map((q,I)=>{q.lookup!==void 0&&r(ee({appId:t,index:I}))});break;case"info":u(s.message,{variant:"info"});break;default:i.error(s),u(s.message??S.contactSupport,{variant:"error"})}else i.error(s),u(S.contactSupport,{variant:"error"})},s=>{i.error("error",s),u(s??S.contactSupport,{variant:"error"})}),g(!1)}},G=()=>{v?(B(),setTimeout(()=>{a()},1e3)):a()},[E,H]=o.useState(0),K=o.useMemo(()=>[{title:"Form",icon:e.jsx(ie,{})},{title:"Columns",icon:e.jsx(ne,{})},{title:"Hooks",icon:e.jsx(le,{})},{title:"Theme",icon:e.jsx(ae,{})}],[]);return _e(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(Ce,{closeDrawer:x,children:[e.jsxs(me,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ce,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(be,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(h,{title:"Dock to left",position:"bottom",children:e.jsx(j,{onClick:()=>{F(y.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(de,{})})}),e.jsx(h,{title:"Dock to right",position:"bottom",children:e.jsx(j,{onClick:()=>{F(y.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(pe,{})})}),e.jsx(h,{title:"Close",position:"bottom",children:e.jsx(j,{onClick:x,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(ue,{})})})]}),e.jsx(Se,{menuItems:K,menuIndex:E,setMenu:H,hide:[2]})]}),e.jsx(O,{className:"pp-settings-container",children:e.jsx(P,{sx:{padding:0,margin:0},children:e.jsx(fe,{value:E,children:e.jsxs(xe,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(b,{value:0,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Fe,{appId:t})})}),e.jsx(b,{value:1,className:"pp-column-settings-container",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ve,{appId:t})})}),!1,n!==!0&&e.jsx(b,{value:3,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ke,{appId:t,source:he.FORM,setIsUpdated:g})})})]})})})}),e.jsx(O,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:w},children:e.jsxs(P,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(_,{variant:"outlined",className:"footer_action_button_apply",onClick:B,children:"Apply"}),e.jsx(_,{variant:"outlined",className:"footer_action_button",onClick:G,children:"OK"}),e.jsx(_,{variant:"outlined",className:"footer_action_button",onClick:x,children:"Cancel"})]})})]})}),e.jsx(re,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:N,setOpen:C,onConfirm:()=>{k(),a()},onKeep:()=>{a()}})]})};export{it as default};
