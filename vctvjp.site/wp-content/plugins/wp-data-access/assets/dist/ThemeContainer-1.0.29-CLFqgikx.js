const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableContainer-1.0.29-yJ4HmhJu.js","./cm-1.0.29-B-jRz_ox.js","./redux-1.0.29-C1Q38y1F.js","./vendor-1.0.29-BmpNFhoq.js","./AdminTheme-1.0.29-j2gnN0Eb.js","./lib-1.0.29-C3pCU2AT.js","./loglevel-1.0.29-BZ7XahX3.js","./lodash-1.0.29-CLFJOMhY.js","./moment-1.0.29-C5S46NFB.js","./Typography-1.0.29-DKDDWYKJ.js","./main-1.0.29.js","./notistack-1.0.29-DTteiN_s.js","./tanstack-1.0.29-h9aUsVM0.js","./FallbackSpinner-1.0.29-Bxoz_pLD.js","./Spinner-1.0.29-BS14fgdJ.js","./RestApi-1.0.29-D1Nj1ewF.js","./ActionsSettings-1.0.29-CQwexJxa.js","./TargetEnum-1.0.29-DPFnTxiX.js","./ConfirmDialog-1.0.29-CS4WrjWL.js","./DialogContent-1.0.29-DSOFFK1-.js","./index-1.0.29-Dlm2kjka.js","./iconBase-1.0.29-DWX4ew0u.js","./Menu-1.0.29-DOOr2lTO.js","./ThemeProvider-1.0.29-6fkyOh-r.js","./CardContent-1.0.29-D9omFsvB.js","./ConfirmDialog-1.0.29--D4jr2go.css","./ScopeEnum-1.0.29-B4DDvIDj.js","./index-1.0.29-DNyiXtkx.js","./TabPanel-1.0.29-CHhWjnrS.js","./useTableUpdater-1.0.29-CrKOH01n.js","./settings-1.0.29-CBCx_N9a.js","./MenuItem-1.0.29-hQUyAg_Q.js","./settings-1.0.29-Bx2jvYL6.css","./useTheme-1.0.29-BG2eLrmM.js","./index-1.0.29-D3hJYFO0.js","./FormContainer-1.0.29-Bc2qt4Ga.js","./ActionsDml-1.0.29-CLWi12Fx.js","./useScreenSize-1.0.29-C2BqwJQv.js","./useStoreTable-1.0.29-0wdtptv-.js","./dompurify-1.0.29-CCJo14B2.js","./dayjs.min-1.0.29-DcSvnIA7.js","./CardActions-1.0.29-m2umL7cE.js","./FormContainer-1.0.29-DR7D6eET.css","./TableChartDock-1.0.29-DonlzeJS.js","./Chart-1.0.29-C3cfFZaj.js","./Tooltip-1.0.29-D8cmS8RQ.js","./Popper-1.0.29-DA77uIz-.js","./useControlled-1.0.29-gPCMf8hr.js"])))=>i.map(i=>d[i]);
import{j as t}from"./cm-1.0.29-B-jRz_ox.js";import{_ as y}from"./main-1.0.29.js";import{r as l}from"./redux-1.0.29-C1Q38y1F.js";import{l as c,K as J,S as Y,A as k,L as h,M as Z,N as ee,O as se,d as te,Q as oe,T as re,U as le,V as ne,W as ae,X as ie}from"./lib-1.0.29-C3pCU2AT.js";import{u as ce,a as de}from"./RestApi-1.0.29-D1Nj1ewF.js";import{R as pe,C as ue,u as me,a as fe,b as Te,c as U,D as i,d as be,B as ge,e as xe,A as Ee,f as he,g as Se}from"./useTheme-1.0.29-BG2eLrmM.js";import{A as je,T as _e,e as ve,M as Fe}from"./index-1.0.29-Dlm2kjka.js";import{F as M}from"./FallbackSpinner-1.0.29-Bxoz_pLD.js";import{B as j}from"./Spinner-1.0.29-BS14fgdJ.js";import{T as w}from"./Tooltip-1.0.29-D8cmS8RQ.js";import{I as N}from"./iconBase-1.0.29-DWX4ew0u.js";import{T as Me}from"./ThemeProvider-1.0.29-6fkyOh-r.js";var C=(e=>(e[e.SELECT=0]="SELECT",e[e.INSERT=1]="INSERT",e[e.UPDATE=2]="UPDATE",e[e.DELETE=3]="DELETE",e[e.EXPORT=4]="EXPORT",e[e.IMPORT=5]="IMPORT",e[e.VIEW=6]="VIEW",e))(C||{});const Ce=e=>4,ye=e=>{const a=ce(T=>{var d,u;return((u=(d=T.tables[e])==null?void 0:d.state)==null?void 0:u.fullScreen)??!1});return c.debug("fullScreen",a),a},Le=l.lazy(()=>y(()=>import("./TableContainer-1.0.29-yJ4HmhJu.js").then(e=>e.T),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),import.meta.url)),V=l.lazy(()=>y(()=>import("./FormContainer-1.0.29-Bc2qt4Ga.js").then(e=>e.F),__vite__mapDeps([35,10,1,2,3,11,5,6,7,8,14,9,4,15,36,33,34,20,21,37,38,39,40,24,41,23,42]),import.meta.url)),W=l.lazy(()=>y(()=>import("./TableChartDock-1.0.29-DonlzeJS.js"),__vite__mapDeps([43,1,2,3,44,10,11,5,6,7,8,33,15,34,9,20,21,14,45,23,46,47]),import.meta.url)),z=({appId:e})=>{var P,R;c.debug(e);const a=de(),T=pe(),d=ue(),u=Ce(),g=me(e),r=fe(e),m=Te(e),p="pp-remove-body-vertical-scrollbar",s=U(e),S=l.useMemo(()=>{var o,n,x,E,D;return(o=s==null?void 0:s.src)!=null&&o.app_id&&((x=(n=s==null?void 0:s.app)==null?void 0:n.app[0])==null?void 0:x.app_title)!==""?s.app.app[0].app_title:(E=s==null?void 0:s.src)!=null&&E.dbs&&((D=s==null?void 0:s.src)!=null&&D.tbl)?s.src.dbs+" - "+s.src.tbl:"WP Data Access"},[]),f=ye(e);l.useEffect(()=>(c.debug(f),()=>{var o;(o=window.document.getElementById(p))==null||o.remove(),window.document.body.classList.remove("pp-fullscreen")}),[f]);const L=l.useMemo(()=>J.getSelectors().selectTableExploring(Y.getState().tables,e),[e]);c.debug("tableExploring",L);const[b,I]=l.useState(((R=(P=s==null?void 0:s.app)==null?void 0:P.app[0])==null?void 0:R.app_type)==k.REGISTRATION?i.FORM:i.TABLE),[O,G]=l.useState(!1),_=o=>{a(le({appId:e,mode:o})),I(o)};l.useEffect(()=>{window.ppShowForm=function(o){c.debug(o),B(o),_(i.FORM)}},[e]);const X=(o,n)=>{c.debug(o,n),ne(e)&&(d(e),n!==void 0&&(T(n),d(n))),o&&G(!O),_(i.TABLE)},[A,B]=l.useState(null),[$,v]=l.useState(h.VIEW),F=(o,n)=>{switch(c.debug(o,n),n){case C.INSERT:v(h.INSERT);break;case C.UPDATE:v(h.UPDATE);break;default:v(h.VIEW)}B(o),_(i.FORM)};let H={};be(e);const K=()=>null,Q=()=>t.jsx(l.Suspense,{fallback:t.jsx(M,{title:m.loadingForm}),children:t.jsx(V,{appId:e,primaryKey:A,formMode:h.INSERT,showTable:()=>{},showForm:F,metaData:s})}),q=()=>{var o,n,x,E;return((n=(o=s==null?void 0:s.app)==null?void 0:o.app[0])==null?void 0:n.app_type)==k.REGISTRATION?Q():t.jsxs(t.Fragment,{children:[t.jsxs(l.Suspense,{fallback:t.jsx(M,{title:m.loadingTable}),children:[b===i.TABLE&&(r==null?void 0:r.docked)==="top"&&((x=r==null?void 0:r.data)==null?void 0:x.length)>0&&t.jsx(W,{appId:e}),t.jsx(Le,{appId:e,display:b===i.TABLE,refresh:O,showForm:F,metaData:s}),b===i.TABLE&&(r==null?void 0:r.docked)==="bottom"&&((E=r==null?void 0:r.data)==null?void 0:E.length)>0&&t.jsx(j,{sx:{marginTop:"5px"},children:t.jsx(W,{appId:e})})]}),b===i.FORM&&t.jsx(l.Suspense,{fallback:t.jsx(M,{title:m.loadingForm}),children:t.jsx(V,{appId:e,primaryKey:A,formMode:$,showTable:X,showForm:F,metaData:s})})]})};return t.jsxs(j,{className:"pp-component",sx:f?H:{},children:[t.jsx(je,{className:"pp-header",elevation:u,position:"relative",sx:{margin:"0 0 5px 0"},children:t.jsxs(_e,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(j,{sx:{display:"block",whiteSpace:"nowrap",fontSize:"18px",lineHeight:"18px",fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",marginRight:"10px"},children:S}),t.jsxs(j,{sx:{display:"flex",gap:"10px",justifyContent:"center",alignItems:"center"},children:[Z(s)&&t.jsx(w,{title:t.jsx(ge,{details:g,mode:b}),className:"pp-builder-button",children:t.jsx(N,{sx:{color:"inherit",padding:0},onClick:()=>{b===i.FORM?a(ee({appId:e})):a(se({appId:e}))},children:t.jsx(ve,{})})}),K(),L&&t.jsx(w,{title:m.close,children:t.jsx(N,{sx:{color:"inherit",padding:0},onClick:()=>{var o;(o=window.document.getElementById(p))==null||o.remove(),window.document.body.classList.remove("pp-fullscreen"),s.src.app_id?a(te({isActive:!1,appDbId:0})):a(oe({})),d(e),T(e),a(re({}))},children:t.jsx(Fe,{})})})]})]})}),q()]})},Oe=e=>({}),Ae=({appId:e})=>{c.debug(e);const a=xe(e),T=he(),d=Se(),u=U(e);let g;u.appRootId===void 0&&(g=Ee(d,a,T));const r=Oe(),m=`pp-global-code-${e}`;return l.useEffect(()=>{c.debug("open app")},[]),l.useEffect(()=>()=>{var p;c.debug("close app"),ae(((p=r.onAppClose)==null?void 0:p.code)??"",ie(u),!1)},[]),l.useEffect(()=>{var p,s,S;if(r!==void 0){(p=window.document.getElementById(m))==null||p.remove();const f=window.document.createElement("script");f.id=m,f.innerHTML=((s=r.global)==null?void 0:s.code)??"",(S=window.document.getElementById(`pp-app-${e}`))==null||S.appendChild(f)}},[r]),g!==void 0?t.jsx(Me,{theme:g,children:t.jsx(z,{appId:e})}):t.jsx(z,{appId:e})},Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"}));export{C as R,Ge as T,ye as a,Oe as b,Ce as u};
